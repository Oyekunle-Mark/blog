<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keeping config files in sync with git</title>
    <meta name="date" content="2024-04-06">
    <meta name="tags" content="config, terminal">
    <!-- Add your CSS here -->
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- For code highlighting -->
    <link rel="stylesheet" href="/static/css/pygments.css">
</head>
<body>
    <article>
        <header>
            <h1>Keeping config files in sync with git</h1>
            <div class="metadata">
                <time datetime="2024-04-06">April 06, 2024</time>
                <div class="tags">
                    
                        <span class="tag">config</span>
                    
                        <span class="tag">terminal</span>
                    
                </div>
            </div>
        </header>
        <div class="content">
            <p><mark><strong>NOTE:</strong></mark>This article, and the code in the shared GitHub repository, have been superseded by changes described in this <a href="{{&lt; ref &quot;/posts/multi-environment-configuration-files-management.md&quot; &gt;}}">follow up article</a>.</p>
<p>Until 2024, I didn't have a big need to customise terminal commands and utilities. I used Visual Studio Code heavily, its CLI interface was good enough for me when I needed to use the terminal. My choice to switch to a more terminal-native environment has led me to learn how to be comfortable with Vim and Tmux, and I use these tools both for work and personal use now.</p>
<p>With that decision has also come the need to customize them, via config files, to my taste. Sharing these config files between my work and personal computers(or any other machine for that matter) has led me to check them into git, and devise a git workflow for keeping them in sync across the machines I develop on.</p>
<h2>The config files</h2>
<p>The config files are checked into git and pushed to a <a href="https://github.com/Oyekunle-Mark/dotfiles/tree/master">GitHub repository</a>. At the time of writing this article, I have config files for <a href="https://github.com/Oyekunle-Mark/dotfiles/blob/master/.vimrc">vim</a>, <a href="https://github.com/Oyekunle-Mark/dotfiles/blob/master/.tmux.conf">tmux</a> and <a href="https://github.com/Oyekunle-Mark/dotfiles/blob/master/.zshrc">zsh</a>. The GitHub repository can be considered the single source of truth for every machine that pulls its config from that repository.</p>
<h2>Workflow</h2>
<h3>On a new machine</h3>
<p>Setting up config files on a new machine includes:</p>
<ol>
<li>Cloning the repository into <code>$HOME/my_works</code>. I keep all my development projects in a <code>$HOME/my_works</code> folder as a matter of habit. You can choose to put this anywhere in your file system that suits you, you just have to account for the change in path if you will be copying commands from this article.</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/my_works<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Oyekunle-Mark/dotfiles.git
</code></pre></div>

<ol>
<li>Create symbolic links from the config files in my home directory to the files in the <code>dotfiles</code> folder cloned above. For example, to create a symbolic link for a vim config file, I use this command:</li>
</ol>
<div class="codehilite"><pre><span></span><code>ln<span class="w"> </span>-nfs<span class="w"> </span><span class="nv">$HOME</span>/my_works/dotfiles/.vimrc<span class="w"> </span><span class="nv">$HOME</span>/.vimrc
</code></pre></div>

<p>Alternatively, I have a <a href="https://github.com/Oyekunle-Mark/dotfiles/blob/master/setup_dotfiles.sh">setup_dotfiles.sh</a> in the repository to create all the links and perform other setup actions required. Executing this script saves me a few keystrokes.</p>
<h3>Keeping them in sync</h3>
<p>To make it possible to pull the latest config from anywhere in the file path, I have this alias in my <code>.zshrc</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">alias</span><span class="w"> </span><span class="nv">dot_g</span><span class="o">=</span><span class="s1">&#39;/usr/bin/git --git-dir=$HOME/my_works/dotfiles/.git --work-tree=$HOME/my_works/dotfiles&#39;</span>
</code></pre></div>

<h4>Update on one machine</h4>
<p>After making an update to a config file(s), I can use</p>
<div class="codehilite"><pre><span></span><code>dot_g<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s2">&quot;&lt;commit message&gt;&quot;</span>
dot_g<span class="w"> </span>push
</code></pre></div>

<h4>On another machine</h4>
<div class="codehilite"><pre><span></span><code>dot_g<span class="w"> </span>pull
</code></pre></div>

<p>From anywhere update the config files.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><a href="https://en.wikipedia.org/wiki/The_Hobbit">The Hobbit</a>&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:1" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref3:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><a href="https://www.prusa3d.com/category/3d-printers/">Prusa Printers</a>&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p><a href="https://www.printables.com/">Printables</a>&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
        </div>
    </article>
</body>
</html>